<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet author="amalik" id="1">
        <createTable tableName="UserRegistrations">
            <column name="userID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="UserRegistrations_pkey"/>
            </column>
            <column name="login" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="firstName" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="secondName" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="salutation" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="location" type="VARCHAR"/>
            <column name="primaryEmail" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createdByUserID" type="VARCHAR"/>
            <column name="createdByUserTokenID" type="VARCHAR"/>
            <column name="hashedSaltedPassword" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="salt" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionHouseID" type="VARCHAR"/>
            <column name="userPermissionBitMask" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="isActive" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="mustChangePW" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="createTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="resetToken" type="VARCHAR"/>
            <column name="resetTokenExpiry" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="updateTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="updatedByUserID" type="VARCHAR"/>
            <column name="trustLevel" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="allowEmail" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="2">
        <createTable tableName="UserPaddles">
            <column name="paddleID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="UserPaddles_pkey"/>
            </column>
            <column name="userID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="paddleNumber" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="spendLimitApproved" type="FLOAT8"/>
            <column name="approvedByID" type="VARCHAR"/>
            <column name="approvedTimestamp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="createdTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="3">
        <createTable tableName="SaleLots">
            <column name="saleLotID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="SaleLots_pkey"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionHouseID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="lotIndex" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="lotNumber" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="footnote" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="lowEst" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="highEst" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="resaleRights" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="isLocked" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="isWithdrawn" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="lotState" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="curViewers" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="peakViewers" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="salePrice" type="FLOAT8"/>
            <column name="winningBid" type="VARCHAR"/>
            <column name="leadingBid" type="VARCHAR"/>
            <column name="lastLeadingBid" type="VARCHAR"/>
            <column name="transactionTime" type="TIMESTAMP WITHOUT TIME ZONE"/>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="4">
        <createTable tableName="KeyMap">
            <column name="keyID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="KeyMap_pkey"/>
            </column>
            <column name="theirID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="ourID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="table" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="5">
        <createTable tableName="BiddingRequest">
            <column name="requestID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="BiddingRequest_pkey"/>
            </column>
            <column name="userID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="decisionOpt" type="BOOLEAN"/>
            <column name="decisionTimestamp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="decisionMadeByID" type="VARCHAR"/>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="6">
        <createTable tableName="Bids">
            <column name="bidID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="Bids_pkey"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="saleLotID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="offerID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="price" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="autoBidID" type="VARCHAR"/>
            <column name="platformID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="isClerkBid" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="paddleID" type="VARCHAR"/>
            <column name="userID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="userLoginName" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="displayAs" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="bidderTokenID" type="VARCHAR"/>
            <column name="bidTime" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="orderingIndex" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="7">
        <createTable tableName="Offers">
            <column name="offerID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="Offers_pkey"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="clerkUserID" type="VARCHAR"/>
            <column name="saleLotID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="clerkLoginTokenID" type="VARCHAR"/>
            <column name="offerPrice" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="isVoid" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="considerAsFirstBidID" type="VARCHAR"/>
            <column name="acceptedBidID" type="VARCHAR"/>
            <column name="clerkAction" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="offerTime" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="displayTimestamp" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column autoIncrement="true" name="orderingIndex" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="8">
        <createTable tableName="AuctionHouses">
            <column name="auctionHouseID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="AuctionHouses_pkey"/>
            </column>
            <column name="shortName" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="address1" type="VARCHAR"/>
            <column name="address2" type="VARCHAR"/>
            <column name="address3" type="VARCHAR"/>
            <column name="postcode" type="VARCHAR"/>
            <column name="country" type="VARCHAR"/>
            <column name="phoneNumber" type="VARCHAR"/>
            <column name="defaultCurrency" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="defaultCurrencySymbol" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="startingPaddle" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="startPriceMultiple" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="isActive" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="isLocked" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="createdByID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="updatedByID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="updateTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="s3Bucket" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="lastAuctionNumber" type="INTEGER">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="9">
        <createTable tableName="Auctions">
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="Auctions_pkey"/>
            </column>
            <column name="auctionHouseID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionNumber" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="currency" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="currencySymbol" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="specialist" type="VARCHAR"/>
            <column name="specialistEmail" type="VARCHAR"/>
            <column name="auctionDate" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="auctionState" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="runLevel" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="isPaused" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="isActive" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="isLocked" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="currentSaleLotID" type="VARCHAR"/>
            <column name="currentVideoID" type="VARCHAR"/>
            <column name="tickerMessage" type="VARCHAR"/>
            <column name="playVideo" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="lastPaddleIssued" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="startingPriceMultiple" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="createdByID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="updatedByID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="updateTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="haveLock" type="VARCHAR"/>
            <column name="importStage" type="VARCHAR"/>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="10">
        <createTable tableName="PresetMessages">
            <column name="messageID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PresetMessages_pkey"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="text" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="colour" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="messageIndex" type="INTEGER">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="11">
        <createTable tableName="BidIncrements">
            <column name="bidIncID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="BidIncrements_pkey"/>
            </column>
            <column name="auctionHouseID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionID" type="VARCHAR"/>
            <column name="from" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="inc" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="createdByID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="12">
        <createTable tableName="AutoBids">
            <column name="autoBidID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="AutoBids_pkey"/>
            </column>
            <column name="saleLotID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="userID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="bidLimit" type="FLOAT8"/>
            <column name="isActive" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="updateTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="orderIndex" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="13">
        <createTable tableName="UserLogins">
            <column name="loginTokenID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="UserLogins_pkey"/>
            </column>
            <column name="userID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionHouseID" type="VARCHAR"/>
            <column name="auctionID" type="VARCHAR"/>
            <column name="ipAddress" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="updateTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="tokenExpires" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="isValid" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="14">
        <createTable tableName="AuctionVideo">
            <column name="videoID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="AuctionVideo_pkey"/>
            </column>
            <column name="auctionHouseID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="auctionID" type="VARCHAR"/>
            <column name="name" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="streamID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="isLive" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="isS3" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="isRunning" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="duration" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="15">
        <createTable tableName="Platforms">
            <column name="platformID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="Platforms_pkey"/>
            </column>
            <column name="auctionHouseID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="platformName" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="platformSN" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="platformIcon" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="isStreamBid" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="createdByID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTimestamp" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="16">
        <createIndex indexName="idx_userKey" tableName="UserRegistrations" unique="true">
            <column name="login"/>
            <column name="auctionHouseID"/>
        </createIndex>
    </changeSet>
    <changeSet author="amalik" id="17">
        <addForeignKeyConstraint baseColumnNames="approvedByID" baseTableName="UserPaddles" constraintName="approvedByID_IsUsedBy_UserRegistrations_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="userID" referencedTableName="UserRegistrations" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="18">
        <addForeignKeyConstraint baseColumnNames="auctionHouseID" baseTableName="UserRegistrations" constraintName="auctionHouseID_IsUsedBy_Auctions_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="auctionHouseID" referencedTableName="AuctionHouses" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="19">
        <addForeignKeyConstraint baseColumnNames="clerkUserID" baseTableName="Offers" constraintName="clerkUserID_IsUsedBy_UserRegistrations_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="userID" referencedTableName="UserRegistrations" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="20">
        <addForeignKeyConstraint baseColumnNames="createdByID" baseTableName="AuctionHouses" constraintName="createdByID_IsUsedBy_UserRegistrations_fk" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="CASCADE" referencedColumnNames="userID" referencedTableName="UserRegistrations" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="21">
        <addForeignKeyConstraint baseColumnNames="createdByUserID" baseTableName="UserRegistrations" constraintName="createdByUserID_IsUsedBy_UserRegistrations_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="userID" referencedTableName="UserRegistrations" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="22">
        <addForeignKeyConstraint baseColumnNames="createdByUserTokenID" baseTableName="UserRegistrations" constraintName="createdByUserTokenID_IsUsedBy_UserLogins_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="loginTokenID" referencedTableName="UserLogins" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="23">
        <addForeignKeyConstraint baseColumnNames="updatedByID" baseTableName="AuctionHouses" constraintName="updatedByID_IsUsedBy_UserRegistrations_fk" deferrable="false" initiallyDeferred="false" onDelete="RESTRICT" onUpdate="CASCADE" referencedColumnNames="userID" referencedTableName="UserRegistrations" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="24">
        <addForeignKeyConstraint baseColumnNames="updatedByUserID" baseTableName="UserRegistrations" constraintName="updatedByUserID_IsUsedBy_UserRegistrations_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="userID" referencedTableName="UserRegistrations" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="25">
        <addForeignKeyConstraint baseColumnNames="userID" baseTableName="UserLogins" constraintName="userID_IsUsedBy_UserRegistrations_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="userID" referencedTableName="UserRegistrations" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="26">
        <createIndex indexName="idx_UniquePaddle" tableName="UserPaddles" unique="true">
            <column name="auctionID"/>
            <column name="paddleNumber"/>
        </createIndex>
    </changeSet>
    <changeSet author="amalik" id="27">
        <addForeignKeyConstraint baseColumnNames="paddleID" baseTableName="Bids" constraintName="paddleID_IsUsedBy_UserPaddles_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="paddleID" referencedTableName="UserPaddles" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="28">
        <createIndex indexName="idx_lotUniqueIndex" tableName="SaleLots" unique="true">
            <column name="auctionID"/>
            <column name="lotIndex"/>
        </createIndex>
    </changeSet>
    <changeSet author="amalik" id="29">
        <createIndex indexName="idx_lotUniqueNumber" tableName="SaleLots" unique="true">
            <column name="auctionID"/>
            <column name="lotNumber"/>
        </createIndex>
    </changeSet>
    <changeSet author="amalik" id="30">
        <addForeignKeyConstraint baseColumnNames="currentSaleLotID" baseTableName="Auctions" constraintName="currentSaleLotID_IsUsedBy_SaleLots_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="saleLotID" referencedTableName="SaleLots" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="31">
        <addForeignKeyConstraint baseColumnNames="lastLeadingBid" baseTableName="SaleLots" constraintName="lastLeadingBid_IsUsedBy_Bids_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="bidID" referencedTableName="Bids" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="32">
        <addForeignKeyConstraint baseColumnNames="leadingBid" baseTableName="SaleLots" constraintName="leadingBid_IsUsedBy_Bids_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="bidID" referencedTableName="Bids" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="33">
        <addForeignKeyConstraint baseColumnNames="saleLotID" baseTableName="AutoBids" constraintName="saleLotID_IsUsedBy_SaleLots_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="saleLotID" referencedTableName="SaleLots" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="34">
        <addForeignKeyConstraint baseColumnNames="winningBid" baseTableName="SaleLots" constraintName="winningBid_IsUsedBy_Bids_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="bidID" referencedTableName="Bids" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="35">
        <createIndex indexName="idx_goKey" tableName="KeyMap" unique="true">
            <column name="theirID"/>
            <column name="table"/>
            <column name="auctionID"/>
        </createIndex>
    </changeSet>
    <changeSet author="amalik" id="36">
        <createIndex indexName="idx_sbKey" tableName="KeyMap" unique="true">
            <column name="ourID"/>
            <column name="table"/>
        </createIndex>
    </changeSet>
    <changeSet author="amalik" id="37">
        <createIndex indexName="idx_userBiddingRequest" tableName="BiddingRequest" unique="true">
            <column name="userID"/>
            <column name="auctionID"/>
        </createIndex>
    </changeSet>
    <changeSet author="amalik" id="38">
        <addForeignKeyConstraint baseColumnNames="acceptedBidID" baseTableName="Offers" constraintName="acceptedBidID_IsUsedBy_Bids_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="bidID" referencedTableName="Bids" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="39">
        <addForeignKeyConstraint baseColumnNames="autoBidID" baseTableName="Bids" constraintName="autoBidID_IsUsedBy_AutoBids_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="autoBidID" referencedTableName="AutoBids" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="40">
        <addForeignKeyConstraint baseColumnNames="bidderTokenID" baseTableName="Bids" constraintName="bidderLoginTokenID_IsUsedBy_UserLogins_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="loginTokenID" referencedTableName="UserLogins" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="41">
        <addForeignKeyConstraint baseColumnNames="considerAsFirstBidID" baseTableName="Offers" constraintName="considerAsFirstBidID_IsUsedBy_Bids_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="bidID" referencedTableName="Bids" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="42">
        <addForeignKeyConstraint baseColumnNames="offerID" baseTableName="Bids" constraintName="offerID_IsUsedBy_Offers_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="offerID" referencedTableName="Offers" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="43">
        <addForeignKeyConstraint baseColumnNames="platformID" baseTableName="Bids" constraintName="platformID_IsUsedBy_Platforms_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="platformID" referencedTableName="Platforms" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="44">
        <addForeignKeyConstraint baseColumnNames="clerkLoginTokenID" baseTableName="Offers" constraintName="clerkLoginTokenID_IsUsedBy_UserLogins_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="loginTokenID" referencedTableName="UserLogins" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="45">
        <addForeignKeyConstraint baseColumnNames="auctionHouseID" baseTableName="Auctions" constraintName="auctionHouseID_IsUsedBy_AuctionHouses_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="auctionHouseID" referencedTableName="AuctionHouses" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="46">
        <addUniqueConstraint columnNames="shortName" constraintName="AuctionHouses_shortName_key" tableName="AuctionHouses"/>
    </changeSet>
    <changeSet author="amalik" id="47">
        <addForeignKeyConstraint baseColumnNames="auctionID" baseTableName="PresetMessages" constraintName="auctionID_IsUsedBy_Auctions_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="auctionID" referencedTableName="Auctions" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="48">
        <addForeignKeyConstraint baseColumnNames="auctionID" baseTableName="BidIncrements" constraintName="auctionID_IsUsedBy_BidIncrements_fk" deferrable="false" initiallyDeferred="false" onDelete="CASCADE" onUpdate="CASCADE" referencedColumnNames="auctionID" referencedTableName="Auctions" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="49">
        <addForeignKeyConstraint baseColumnNames="currentVideoID" baseTableName="Auctions" constraintName="currentVideoID_IsUsedBy_AuctionVideo_fk" deferrable="false" initiallyDeferred="false" onDelete="SET NULL" onUpdate="CASCADE" referencedColumnNames="videoID" referencedTableName="AuctionVideo" validate="true"/>
    </changeSet>
    <changeSet author="amalik" id="50">
        <addUniqueConstraint columnNames="streamID" constraintName="AuctionVideo_streamID_key" tableName="AuctionVideo"/>
    </changeSet>
    <changeSet author="amalik" id="51">
        <createTable tableName="Images">
            <column name="imageID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="Images_pkey"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="saleLotID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="imageLocator" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="imageNum" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="imageSize" type="INTEGER">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="52">
        <createTable tableName="LotInteractions">
            <column name="lotInteractionID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="LotInteractions_pkey"/>
            </column>
            <column name="saleLotID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="userID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="like" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="wish" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="interactionCount" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="updateTime" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="createTime" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="53">
        <createTable tableName="Messages">
            <column name="messageID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="Messages_pkey"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="text" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="colour" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTime" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="amalik" id="54">
        <createTable tableName="Notifications">
            <column name="notificationID" type="VARCHAR">
                <constraints nullable="false" primaryKey="true" primaryKeyName="Notifications_pkey"/>
            </column>
            <column name="auctionID" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="userID" type="VARCHAR"/>
            <column name="action" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="payload" type="VARCHAR">
                <constraints nullable="false"/>
            </column>
            <column name="createTime" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="hasBeenSent" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <!-- <changeSet  author="amalik"  id="tagDatabase">  
        <tagDatabase  tag="change1.xml_completed"/>  
    </changeSet> -->
</databaseChangeLog>
